<Window x:Class="TalkieClient.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Talkie" Height="600" Width="1000">
    <Window.Resources>
        <DataTemplate x:Key="MessageTemplate">
            <StackPanel Orientation="Vertical" Margin="5">
                <TextBlock Text="{Binding Sender.Username}" FontWeight="Bold" />
                <TextBlock Text="{Binding Content}" TextWrapping="Wrap" />
                <TextBlock Text="{Binding Timestamp, StringFormat='HH:mm:ss'}" FontStyle="Italic" HorizontalAlignment="Right" />
            </StackPanel>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>

        <!-- Текущий пользователь -->
        <TextBlock x:Name="CurrentUserTextBlock" Grid.Column="0" Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold" />

        <!-- Кнопка создания группы -->
        <Button Content="Create Group" Grid.Column="1" Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="10" Click="CreateGroupButton_Click" />

        <!-- Список всех пользователей и групп -->
        <StackPanel Grid.Column="0" Grid.Row="1">
            <TextBlock Text="Users:" FontWeight="Bold" Margin="5"/>
            <ListBox x:Name="UserList" Grid.Column="0" Grid.Row="1" SelectionChanged="UserList_SelectionChanged" DisplayMemberPath="Username"/>
            <TextBlock Text="Groups:" FontWeight="Bold" Margin="10,20,10,5"/>
            <ListBox x:Name="GroupList" SelectionChanged="GroupList_SelectionChanged" Margin="5"/>
        </StackPanel>

        <!-- Данные о контакте/группе -->
        <StackPanel Grid.Column="1" Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
            <TextBlock Text="Chat with: " FontWeight="Bold" />
            <TextBlock x:Name="ChatWithTextBlock" />
        </StackPanel>

        <!-- Окно сообщений -->
        <ListBox x:Name="MessageList" Grid.Column="1" Grid.Row="1" ItemTemplate="{StaticResource MessageTemplate}" />

        <!-- Окно ввода сообщения и кнопки -->
        <StackPanel Grid.Column="1" Grid.Row="2" Orientation="Horizontal">
            <TextBox x:Name="MessageTextBox" Width="600" Margin="5" />
            <Button Content="Send" Click="SendButton_Click" Margin="5" />
        </StackPanel>
    </Grid>
</Window>
